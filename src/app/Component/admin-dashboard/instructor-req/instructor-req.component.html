<!-- Section: Pending -->
<div (click)="toggleSection('pending')"
    class="bg-gray-800 mt-6 text-white font-bold p-3 cursor-pointer select-none flex justify-between items-center rounded-md shadow-md hover:bg-gray-600 transition">
    <span>Pending Instructors ({{ pendingInstructors.length }})</span>
    <span>{{ isSectionOpen.pending ? '▲' : '▼' }}</span>
</div>
<div *ngIf="isSectionOpen.pending" class="bg-gray-200 p-4 rounded-md shadow-inner mt-2 overflow-x-auto">
    <table class="min-w-full border border-gray-300 text-sm text-left">
        <thead class="bg-gray-400 text-black uppercase">
            <tr>
                <th class="border px-4 py-2">User ID</th>
                <th class="border px-4 py-2">Full Name</th>
                <th class="border px-4 py-2">Email</th>
                <th class="border px-4 py-2">Phone Number</th>
                <th class="border px-4 py-2">Age</th>
                <th class="border px-4 py-2">Gender</th>
                <th class="border px-4 py-2">Address</th>
                <th class="border px-4 py-2">Profile Picture</th>
                <th class="border px-4 py-2">Approval Status</th>
                <th class="border px-4 py-2">Action</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let instructor of pendingInstructors" class="bg-white hover:bg-gray-100">
                <td class="border px-4 py-2">{{ instructor.userId }}</td>
                <td class="border px-4 py-2">{{ instructor.fullName }}</td>
                <td class="border px-4 py-2">{{ instructor.email }}</td>
                <td class="border px-4 py-2">{{ instructor.phoneNumber }}</td>
                <td class="border px-4 py-2">{{ instructor.age }}</td>
                <td class="border px-4 py-2">{{ instructor.gender }}</td>
                <td class="border px-4 py-2">{{ instructor.address }}</td>
                <td class="border px-4 py-2">
                    <img [src]="'https://localhost:7000' + instructor.profilePic" alt="Profile Pic"
                        class="w-12 h-12 object-cover rounded-full cursor-pointer" *ngIf="instructor.profilePic"
                        (click)="showImageFullScreen('https://localhost:7000' + instructor.profilePic)" />
                </td>
                <td class="border px-4 py-2">{{ instructor.approvalStatus }}</td>
                <td class="border px-4 py-2">
                    <div class="flex flex-wrap gap-2">
                        <button
                            class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition cursor-pointer"
                            (click)="acceptInstructor(instructor.userId)">
                            Accept
                        </button>
                        <button
                            class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition cursor-pointer"
                            (click)="openRejectModal(instructor.userId)">
                            Reject
                        </button>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Approved Section -->
<div (click)="toggleSection('approved')"
    class="bg-gray-800 mt-6 text-white font-bold p-3 cursor-pointer select-none flex justify-between items-center rounded-md shadow-md hover:bg-gray-600 transition">
    <span>Approved Instructors ({{ approvedInstructors.length }})</span>
    <span>{{ isSectionOpen.approved ? '▲' : '▼' }}</span>
</div>
<div *ngIf="isSectionOpen.approved" class="bg-gray-200 p-4 rounded-md shadow-inner mt-2 overflow-x-auto">
    <table class="min-w-full border border-gray-300 text-sm text-left">
        <thead class="bg-gray-400 text-black uppercase">
            <tr>
                <th class="border px-4 py-2">User ID</th>
                <th class="border px-4 py-2">Full Name</th>
                <th class="border px-4 py-2">Email</th>
                <th class="border px-4 py-2">Phone Number</th>
                <th class="border px-4 py-2">Age</th>
                <th class="border px-4 py-2">Gender</th>
                <th class="border px-4 py-2">Address</th>
                <th class="border px-4 py-2">Profile Picture</th>
                <th class="border px-4 py-2">Approval Status</th>
                <th class="border px-4 py-2">Action</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let instructor of approvedInstructors" class="bg-white hover:bg-gray-100">
                <td class="border px-4 py-2">{{ instructor.userId }}</td>
                <td class="border px-4 py-2">{{ instructor.fullName }}</td>
                <td class="border px-4 py-2">{{ instructor.email }}</td>
                <td class="border px-4 py-2">{{ instructor.phoneNumber }}</td>
                <td class="border px-4 py-2">{{ instructor.age }}</td>
                <td class="border px-4 py-2">{{ instructor.gender }}</td>
                <td class="border px-4 py-2">{{ instructor.address }}</td>
                <td class="border px-4 py-2">
                    <img [src]="'https://localhost:7000' + instructor.profilePic" alt="Profile Pic"
                        class="w-12 h-12 object-cover rounded-full cursor-pointer" *ngIf="instructor.profilePic"
                        (click)="showImageFullScreen('https://localhost:7000' + instructor.profilePic)" />
                </td>
                <td class="border px-4 py-2">{{ instructor.approvalStatus }}</td>

                <td class="border px-4 py-2">
                    <button
                        class="bg-yellow-600 text-white px-3 py-1 rounded hover:bg-yellow-700 transition cursor-pointer"
                        (click)="deactivateInstructor(instructor.userId)">
                        Deactivate
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Deactivated Section -->
<div (click)="toggleSection('deactivated')"
    class="bg-gray-800 mt-6 text-white font-bold p-3 cursor-pointer select-none flex justify-between items-center rounded-md shadow-md hover:bg-gray-600 transition">
    <span>Deactivated Instructors ({{ deactivatedInstructors.length }})</span>
    <span>{{ isSectionOpen.deactivated ? '▲' : '▼' }}</span>
</div>
<div *ngIf="isSectionOpen.deactivated" class="bg-gray-200 p-4 rounded-md shadow-inner mt-2 overflow-x-auto">
    <table class="min-w-full border border-gray-300 text-sm text-left">
        <thead class="bg-gray-400 text-black uppercase">
            <tr>
                <th class="border px-4 py-2">User ID</th>
                <th class="border px-4 py-2">Full Name</th>
                <th class="border px-4 py-2">Email</th>
                <th class="border px-4 py-2">Phone Number</th>
                <th class="border px-4 py-2">Age</th>
                <th class="border px-4 py-2">Gender</th>
                <th class="border px-4 py-2">Address</th>
                <th class="border px-4 py-2">Profile Picture</th>
                <th class="border px-4 py-2">Approval Status</th>
                <th class="border px-4 py-2">Action</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let instructor of deactivatedInstructors" class="bg-white hover:bg-gray-100">
                <td class="border px-4 py-2">{{ instructor.userId }}</td>
                <td class="border px-4 py-2">{{ instructor.fullName }}</td>
                <td class="border px-4 py-2">{{ instructor.email }}</td>
                <td class="border px-4 py-2">{{ instructor.phoneNumber }}</td>
                <td class="border px-4 py-2">{{ instructor.age }}</td>
                <td class="border px-4 py-2">{{ instructor.gender }}</td>
                <td class="border px-4 py-2">{{ instructor.address }}</td>
                <td class="border px-4 py-2">
                    <img [src]="'https://localhost:7000' + instructor.profilePic" alt="Profile Pic"
                        class="w-12 h-12 object-cover rounded-full cursor-pointer" *ngIf="instructor.profilePic"
                        (click)="showImageFullScreen('https://localhost:7000' + instructor.profilePic)" />
                </td>
                <td class="border px-4 py-2">{{ instructor.approvalStatus }}</td>

                <!-- All fields -->
                <td class="border px-4 py-2">
                    <button
                        class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition text-sm sm:text-base w-full sm:w-auto cursor-pointer"
                        (click)="activateInstructor(instructor.userId)">
                        Activate
                    </button>
                </td>
            </tr>

        </tbody>
    </table>
</div>

<!-- Rejected Section -->
<div (click)="toggleSection('rejected')"
    class="bg-gray-800 mt-6 text-white font-bold p-3 cursor-pointer select-none flex justify-between items-center rounded-md shadow-md hover:bg-gray-600 transition">
    <span>Rejected Instructors ({{ rejectedInstructors.length }})</span>
    <span>{{ isSectionOpen.rejected ? '▲' : '▼' }}</span>
</div>
<div *ngIf="isSectionOpen.rejected" class="bg-gray-200 p-4 rounded-md shadow-inner mt-2 overflow-x-auto">
    <table class="min-w-full border border-gray-300 text-sm text-left">
        <thead class="bg-gray-400 text-black uppercase">
            <tr>
                <th class="border px-4 py-2">User ID</th>
                <th class="border px-4 py-2">Full Name</th>
                <th class="border px-4 py-2">Email</th>
                <th class="border px-4 py-2">Phone Number</th>
                <th class="border px-4 py-2">Age</th>
                <th class="border px-4 py-2">Gender</th>
                <th class="border px-4 py-2">Address</th>
                <th class="border px-4 py-2">Profile Picture</th>
                <th class="border px-4 py-2">Approval Status</th>
                <th class="border px-4 py-2">Reason</th>
                <!-- <th class="border px-4 py-2">Action</th> -->
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let instructor of rejectedInstructors" class="bg-white hover:bg-gray-100">
                <td class="border px-4 py-2">{{ instructor.userId }}</td>
                <td class="border px-4 py-2">{{ instructor.fullName }}</td>
                <td class="border px-4 py-2">{{ instructor.email }}</td>
                <td class="border px-4 py-2">{{ instructor.phoneNumber }}</td>
                <td class="border px-4 py-2">{{ instructor.age }}</td>
                <td class="border px-4 py-2">{{ instructor.gender }}</td>
                <td class="border px-4 py-2">{{ instructor.address }}</td>
                <td class="border px-4 py-2">
                    <img [src]="'https://localhost:7000' + instructor.profilePic" alt="Profile Pic"
                        class="w-12 h-12 object-cover rounded-full cursor-pointer" *ngIf="instructor.profilePic"
                        (click)="showImageFullScreen('https://localhost:7000' + instructor.profilePic)" />
                </td>
                <td class="border px-4 py-2">{{ instructor.approvalStatus }}</td>

                <td class="border px-4 py-2 text-red-500">
                    {{ instructor.rejectionReason }}
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Modal same as before -->
<div *ngIf="isRejectModalOpen"
    class="fixed inset-0 bg-black/50 bg-opacity-50 flex items-center justify-center z-50 px-4">
    <div class="bg-white rounded-lg p-6 w-full max-w-md shadow-lg relative">
        <button (click)="closeRejectModal()"
            class="absolute top-2 right-2 text-gray-600 text-xl hover:text-gray-900 cursor-pointer">
            &times;
        </button>
        <label for="reason" class="block mb-1 font-medium text-gray-700">Reason for Rejection</label>

        <textarea id="reason" [(ngModel)]="rejectReason" rows="4"
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-400"
            placeholder="Enter reason here..."></textarea>

        <!-- Error Message -->
        <div *ngIf="showReasonError" class="text-red-600 text-sm mt-1">Reason is required.</div>

        <div class="mt-4 flex justify-end space-x-2">
            <button (click)="submitRejection()"
                class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition cursor-pointer">Submit</button>
            <button (click)="closeRejectModal()"
                class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 transition cursor-pointer">Cancel</button>
        </div>
    </div>
</div>

<!-- Fullscreen Image Modal -->
<div *ngIf="selectedImageUrl" class="fixed inset-0 bg-black/80 bg-opacity-75 flex items-center justify-center z-50"
    (click)="closeImageModal()">
    <img [src]="selectedImageUrl" alt="Full Image"
        class="max-w-full max-h-full rounded-lg border-4 border-white shadow-xl" />
</div>